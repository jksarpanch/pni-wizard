!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("PniWizard",[],e):"object"==typeof exports?exports.PniWizard=e():t.PniWizard=e()}(self,function(){return(()=>{"use strict";var i={22:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.configureWizard=e.resetInteractiveWizard=e.closeInteractiveWizard=e.openInteractiveWizard=void 0;var n=new(i(729).PniWizard),r=n.openInteractiveWizard,o=n.closeInteractiveWizard,i=n.resetInteractiveWizard,n=n.configureWizard;e.openInteractiveWizard=r,e.closeInteractiveWizard=o,e.resetInteractiveWizard=i,e.configureWizard=n},729:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PniWizard=void 0;var n=i(300);i(307);i=function(){var e=this;this.openInteractiveWizard=function(){e.wf.openInteractiveWizard()},this.closeInteractiveWizard=function(){e.wf.closeInteractiveWizard()},this.resetInteractiveWizard=function(){e.wf.resetInteractiveWizard()},this.configureWizard=function(t){e.wf.configureWizard(t)},this.wf=new n.WizardFunctions};e.PniWizard=i},300:function(t,e){var i=this&&this.__awaiter||function(t,s,u,a){return new(u=u||Promise)(function(i,e){function n(t){try{o(a.next(t))}catch(t){e(t)}}function r(t){try{o(a.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?i(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,r)}o((a=a.apply(t,s||[])).next())})},u=this&&this.__generator||function(i,n){var r,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,o=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(i,u)}catch(t){e=[6,t],o=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WizardFunctions=void 0;var n=(r.prototype.fetchNewQuestion=function(){return i(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,fetch(this.dynamicsQuestionApi,{method:"POST",body:JSON.stringify(this.questionList)})];case 1:return[2,t.sent()]}})})},r.prototype.fetchFirstQuestion=function(){return i(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return[4,fetch(this.dynamicsQuestionApi)];case 1:return[4,t.sent().json()];case 2:return e=t.sent(),this.questions.push(e[0]),[2]}})})},r.prototype.getWizardContent=function(){return'<div class="pni-wizard-header pni-color-theme-background">\n    <div class="title">Let me help You!</div>\n    <button data-close-button class="close-button" id=\'pni-wizard-closeBtn\'>&times;</button>\n    </div>\n    <div class="pni-wizard-body"></div>'},r.prototype.initializeWizard=function(t,e){e&&this.removeRepetitiveElements(),t.innerHTML=e?'<div class="pni-wizard active" id="pni-interactive-wizard">'+this.getWizardContent()+"</div>":this.getWizardContent()},r.prototype.addQuestionAnswerHtml=function(t){for(var e=this.questions[t],i=e.Choices,n="<div class=\"pni-questions\" style='text-align: center; margin-bottom: 10px' id='pni-question"+t+'\'>\n        <div class="pni-question"> '+e.Question+'</div>\n        <div style=\'text-align: right; margin-top: 10px\'>\n        <select class="pni-select-css" name="answerOptions'+t+'" id="answerOptions'+t+'">\n        <option value="">Select</option>\n        </div>\n        ',r=0,o=i;r<o.length;r++){var s=o[r];n+='<option value="'+s+'">'+s+"</option>"}return n+="</select></div > "},r.prototype.initializeFirstQuestion=function(){var e=this;document.querySelector(".pni-wizard-body").innerHTML=this.addQuestionAnswerHtml(0);var t="answerOptions"+this.currentQuestionIndex;document.getElementById(t).addEventListener("change",function(t){return e.handleOptionChange(t,0)})},r.prototype.isPniWizardOpen=function(){var t=document.getElementById("pni-interactive-wizard");return t&&t.classList.contains("active")},r.prototype.triggerTrackingEvent=function(t,e,i){i={eventType:"user_answered_question",eventData:{sequence_id:t,questionText:e,answerValue:i}};window.pniTrackingEvent(i)},r.prototype.wizardPositioning=function(t,e,i){i=e?this.defaultLeftPosition:i;var n=document.getElementById("pni-interactive-wizard");t=t||this.defaultTopPosition,e=e||this.defaultRightPosition,i=i||this.defaultLeftPosition,n.style.top=t,n.style.right=e,n.style.left=i},r.prototype.setQuestionsQuery=function(t,e){this.questionList.push({sequence:t,choice:e})},r.prototype.configuringWizard=function(t){var e=t.getAttribute("positioning");this.tracking=!(!t.getAttribute("tracking")||"true"!=t.getAttribute("tracking")),e&&"true"==e&&this.wizardPositioning(t.getAttribute("top"),t.getAttribute("right"),t.getAttribute("left")),t.getAttribute("color")&&document.documentElement.style.setProperty("--defaultTheme",t.getAttribute("color"))},r.prototype.removeRepetitiveElements=function(){document.querySelectorAll("[id=pni-interactive-wizard]").forEach(function(t){t.remove()})},r.prototype.showHideResetButton=function(){document.getElementById("pni-reset-button")&&1<this.questions.length?document.getElementById("pni-reset-button").style.visibility="visible":document.getElementById("pni-reset-button")&&(document.getElementById("pni-reset-button").style.visibility="hidden")},r);function r(){var r=this;this.currentQuestionIndex=0,this.questionsApiRetryCount=0,this.questions=[],this.defaultTopPosition="25%",this.defaultRightPosition="2%",this.defaultLeftPosition="unset",this.dynamicsQuestionApi="https://pni-dev-p2p-web-api.pnidev.com/PNIMedia/DynamicQuestions/",this.questionList=[],this.tracking=!1,this.displayProducts=function(t){},this.handleOptionChange=function(t,e){var i=r.questions[e],n=i.Question;i.Sequence==r.currentQuestionIndex?r.showNextQuestion(i.Sequence,t.target.value):(r.reevaluateQuestions(e),r.currentQuestionIndex=r.questions.length,r.showNextQuestion(i.Sequence,t.target.value),r.showHideResetButton()),r.tracking&&r.triggerTrackingEvent(e,n,t.target.value)},this.reevaluateQuestions=function(i){r.questionList=r.questionList.filter(function(t,e){return e<i}),r.questions.forEach(function(t,e){i<e&&document.getElementById("pni-question"+e).remove()}),r.questions=r.questions.filter(function(t,e){return e<=i})},this.setNewQuestion=function(){return i(r,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return[4,this.fetchNewQuestion()];case 1:return[4,t.sent().json()];case 2:return(e=t.sent())&&e[0]&&1<=e[0].Choices.length?(this.questions.push(e[0]),[2,!0]):(this.displayProducts(e[0].Products),this.questionList.pop(),[2,null])}})})},this.addResetButton=function(){document.querySelector("#pni-interactive-wizard").insertAdjacentHTML("beforeend","<button id='pni-reset-button' class='pni-reset-button pni-color-theme' style=\"visibility: hidden;\">Reset</button>")},this.populateWizard=function(t,e){r.questionsApiRetryCount=0,r.currentQuestionIndex=0,r.initializeWizard(t,e),r.initializeFirstQuestion(),r.currentQuestionIndex=r.questions[0].Sequence,r.addResetButton(),r.configuringWizard(t),e||t.classList.add("active"),document.getElementById("pni-wizard-closeBtn").addEventListener("click",r.closeInteractiveWizard),document.getElementById("pni-reset-button").addEventListener("click",r.resetInteractiveWizard)},this.openInteractiveWizard=function(){var t=!!(e=document.getElementsByTagName("Analytics-Wizard")[0]),e=e||document.getElementById("pni-interactive-wizard"),i=r.questions&&1<=r.questions.length;e&&!r.isPniWizardOpen()&&i?r.populateWizard(e,t):!r.isPniWizardOpen()&&!i&&r.questionsApiRetryCount<30&&(r.questionsApiRetryCount++,setTimeout(function(){r.openInteractiveWizard()},250))},this.showNextQuestion=function(o,s){return i(r,void 0,void 0,function(){var e,i,n,r=this;return u(this,function(t){switch(t.label){case 0:return this.isPniWizardOpen()&&this.currentQuestionIndex==this.questions.length&&s?(this.setQuestionsQuery(o,s),[4,this.setNewQuestion()]):[3,2];case 1:return t.sent()&&(e=document.querySelector(".pni-wizard-body"),n=this.addQuestionAnswerHtml(this.currentQuestionIndex),e.insertAdjacentHTML("beforeend",n),i=this.currentQuestionIndex,n="answerOptions"+i,document.getElementById(n).addEventListener("change",function(t){return r.handleOptionChange(t,i)}),this.currentQuestionIndex=this.currentQuestionIndex+1,this.showHideResetButton(),this.displayProducts(this.questions[this.questions.length-1].Products)),[3,3];case 2:this.isPniWizardOpen(),t.label=3;case 3:return[2]}})})},this.configureWizard=function(t){r.displayProducts=t||r.displayProducts},this.resetWizard=function(){r.questions=[r.questions[0]],r.questionList=[],r.showHideResetButton()},this.resetInteractiveWizard=function(){r.resetWizard(),r.closeInteractiveWizard(),r.openInteractiveWizard()},this.closeInteractiveWizard=function(){document.getElementsByTagName("Analytics-Wizard")[0].innerHTML="",r.resetWizard()},this.fetchFirstQuestion()}e.WizardFunctions=n},307:(t,e,i)=>{i.r(e)}},n={};function r(t){if(n[t])return n[t].exports;var e=n[t]={exports:{}};return i[t].call(e.exports,e,e.exports,r),e.exports}return r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(22)})()});